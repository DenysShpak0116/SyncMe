<template>
    <div class="login">
        <div class="container">
            <div class="login-wrapper">
                <div class="login-logo">
                    <svg width="300" height="70" viewBox="0 0 279 79" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path class="login-logo-path" d="M29.2 4.848C29.392 5.04 29.36 5.264 29.104 5.51999L26.8 7.056C26.608 7.248 26.384 7.216 26.128 6.96C24.656 4.912 22.416 3.888 19.408 3.888C17.04 3.888 15.088 4.56 13.552 5.904C12.016 7.248 11.248 8.944 11.248 10.992C11.248 13.168 11.664 15.088 12.496 16.752C13.328 18.352 14.416 19.824 15.76 21.168C17.168 22.448 19.28 24.24 22.096 26.544C25.232 29.104 27.792 31.408 29.776 33.456C31.824 35.44 33.584 37.872 35.056 40.752C36.528 43.568 37.264 46.704 37.264 50.16C37.264 53.232 36.496 55.984 34.96 58.416C33.488 60.784 31.44 62.64 28.816 63.984C26.192 65.328 23.216 66 19.888 66C16.304 66 13.072 65.232 10.192 63.696C7.376 62.096 5.136 59.888 3.472 57.072C1.808 54.256 0.944 51.056 0.88 47.472C0.88 47.152 1.04 46.992 1.36 46.992H4.048C4.368 46.992 4.528 47.152 4.528 47.472C4.592 51.888 6.064 55.472 8.944 58.224C11.824 60.976 15.472 62.352 19.888 62.352C23.984 62.352 27.28 61.232 29.776 58.992C32.336 56.688 33.616 53.744 33.616 50.16C33.616 47.216 32.976 44.56 31.696 42.192C30.416 39.824 28.912 37.808 27.184 36.144C25.52 34.416 23.056 32.176 19.792 29.424C16.72 26.864 14.448 24.848 12.976 23.376C11.504 21.904 10.224 20.144 9.136 18.096C8.112 16.048 7.6 13.68 7.6 10.992C7.6 7.92 8.72 5.35999 10.96 3.31199C13.2 1.26399 16.016 0.239994 19.408 0.239994C21.456 0.239994 23.344 0.655994 25.072 1.488C26.8 2.256 28.176 3.376 29.2 4.848ZM80.2195 18.864C80.3475 26.352 79.1315 34.512 76.5715 43.344C74.0115 52.176 70.5555 59.728 66.2035 66C64.5395 68.56 62.2995 70.992 59.4835 73.296C56.7315 75.6 53.7555 77.456 50.5555 78.864L49.2115 75.6C51.6435 74.512 53.9475 73.104 56.1235 71.376C58.3635 69.712 60.2515 67.92 61.7875 66C59.2915 62.352 56.2515 56.528 52.6675 48.528C49.1475 40.464 45.6915 31.472 42.2995 21.552C42.1715 21.232 42.2675 21.008 42.5875 20.88L45.0835 19.92C45.2115 19.856 45.3395 19.856 45.4675 19.92C45.5955 19.984 45.6915 20.08 45.7555 20.208C50.8755 35.12 56.8595 49.264 63.7075 62.64C68.1235 56.432 71.3875 49.488 73.4995 41.808C75.6755 34.128 76.6995 26.576 76.5715 19.152C76.5715 19.024 76.6035 18.928 76.6675 18.864C76.7955 18.736 76.9235 18.672 77.0515 18.672L79.6435 18.384C80.0275 18.384 80.2195 18.544 80.2195 18.864ZM104.263 17.904C112.647 17.904 118.535 20.752 121.927 26.448C125.383 32.08 127.111 40.272 127.111 51.024C127.111 55.952 126.887 60.784 126.439 65.52C126.375 65.648 126.279 65.776 126.151 65.904C126.023 66.032 125.895 66.064 125.767 66L123.175 65.52C123.047 65.52 122.951 65.456 122.887 65.328C122.823 65.2 122.791 65.072 122.791 64.944C123.303 59.12 123.559 54.096 123.559 49.872C123.559 40.464 122.087 33.392 119.143 28.656C116.263 23.92 111.303 21.552 104.263 21.552C99.591 21.552 95.783 23.376 92.839 27.024C89.959 30.608 88.359 35.44 88.039 41.52V51.408C88.039 60.624 88.007 65.488 87.943 66H84.295C84.423 64.208 84.487 56.272 84.487 42.192C84.487 27.92 84.423 20.208 84.295 19.056H87.943C88.007 19.376 88.039 22.288 88.039 27.792C89.767 24.656 92.007 22.224 94.759 20.496C97.575 18.768 100.743 17.904 104.263 17.904ZM163.431 19.056C163.751 19.056 163.911 19.216 163.911 19.536L163.719 22.224C163.719 22.544 163.559 22.704 163.239 22.704C162.535 22.64 161.511 22.608 160.167 22.608C155.047 22.608 150.567 23.344 146.727 24.816C142.887 26.224 139.911 28.272 137.799 30.96C135.687 33.584 134.631 36.688 134.631 40.272C134.631 44.56 135.847 48.368 138.279 51.696C140.775 54.96 144.263 57.52 148.743 59.376C153.223 61.232 158.407 62.192 164.295 62.256C164.615 62.256 164.775 62.416 164.775 62.736V65.424C164.775 65.744 164.615 65.904 164.295 65.904C157.703 65.84 151.878 64.752 146.823 62.64C141.831 60.464 137.927 57.456 135.111 53.616C132.359 49.776 130.983 45.328 130.983 40.272C130.983 35.984 132.167 32.24 134.535 29.04C136.967 25.776 140.359 23.28 144.711 21.552C149.063 19.824 154.151 18.96 159.975 18.96C161.511 18.96 162.663 18.992 163.431 19.056ZM228.096 1.10399C228.544 14.288 228.768 25.68 228.768 35.28C228.768 46.16 228.544 56.336 228.096 65.808C228.096 66.128 227.936 66.288 227.616 66.288L224.928 66.096C224.608 66.096 224.448 65.936 224.448 65.616C224.896 56.144 225.12 45.936 225.12 34.992C225.12 26.416 224.96 16.848 224.64 6.288C218.048 13.712 211.424 19.728 204.768 24.336C194.912 19.92 184.48 13.488 173.472 5.04C173.28 12.72 173.184 20.272 173.184 27.696C173.184 41.072 173.504 53.648 174.144 65.424C174.144 65.744 173.984 65.904 173.664 65.904L170.976 66.096C170.656 66.096 170.496 65.936 170.496 65.616C169.856 54.16 169.536 41.872 169.536 28.752C169.536 20.624 169.696 11.28 170.016 0.719999C170.016 0.399996 170.176 0.239994 170.496 0.239994L173.664 0.431997C184.16 8.816 194.368 15.376 204.288 20.112C210.88 15.376 217.6 8.944 224.448 0.815998L227.616 0.623995C227.936 0.623995 228.096 0.783995 228.096 1.10399ZM260.233 65.52C257.737 65.904 255.433 66.096 253.321 66.096C251.273 66.096 249.129 65.872 246.889 65.424C249.577 67.472 252.393 69.36 255.337 71.088C258.281 72.816 260.681 74.032 262.537 74.736L261.481 77.808C259.497 77.232 256.713 75.856 253.129 73.68C249.609 71.568 246.185 69.104 242.857 66.288C239.529 63.536 237.033 60.976 235.369 58.608C233.193 55.728 232.105 52.08 232.105 47.664C232.105 43.184 233.257 38.736 235.561 34.32C237.929 29.84 241.161 26.16 245.257 23.28C249.417 20.4 253.993 18.96 258.985 18.96C262.441 18.96 265.673 20.048 268.681 22.224C271.689 24.4 274.057 27.344 275.785 31.056C277.577 34.768 278.473 38.8 278.473 43.152C278.473 46.864 277.737 50.32 276.265 53.52C274.857 56.656 272.777 59.312 270.025 61.488C267.273 63.6 264.009 64.944 260.233 65.52ZM259.273 22.512C254.921 22.512 250.921 23.76 247.273 26.256C243.689 28.688 240.841 31.824 238.729 35.664C236.681 39.44 235.657 43.216 235.657 46.992C235.657 51.472 237.161 55.152 240.169 58.032C243.177 60.848 247.721 62.256 253.801 62.256C255.465 62.256 257.513 62.096 259.945 61.776C262.761 61.392 265.321 60.304 267.625 58.512C269.929 56.656 271.753 54.384 273.097 51.696C274.441 48.944 275.113 46.064 275.113 43.056C275.113 39.408 274.377 36.016 272.905 32.88C271.433 29.68 269.481 27.152 267.049 25.296C264.617 23.44 262.025 22.512 259.273 22.512Z" fill="#0D0811"/>
                    </svg>
                </div>
                <h2 class = "login-head">
                    Account Register
                </h2>
                <div class="form-block form-block-reg">
                    <div class="register-email">
                        <input type="text" class="login-input" v-model="Email" placeholder="Email">
                        <p class="send-code">send <br/> code</p>
                    </div>
                    <select class="login-input register-country" v-model="Sex">
                        <option value="Male" selected>Male</option>
                        <option value="Female">Female</option>
                    </select>
                    <input type="text" class="login-input register-name" v-model="Username" placeholder="Username">
                    <select class="login-input register-country" v-model="Country">
                        <option value="Ukraine" selected>Ukraine</option>
                        <option value="Poland">Poland</option>
                        <option value="USA">USA</option>
                    </select>
                    <input :type="passwordTypeCheck ? 'text' : 'password'" class="login-input register-password" v-model="Password" placeholder="Enter password">
                    <input :type="passwordTypeCheck ? 'text' : 'password'" class="login-input register-password" v-model="passwordCheck" placeholder="Enter password again">
                    <div class="reg-p-show-block">
                        <input type="checkbox" v-model="passwordTypeCheck" id="passwordC">
                        <label for="passwordC">Показати пароль</label>
                    </div>
                </div>
                <div class="login-btn">
                    <button class="login-btn-button" @click="register">
                        Register
                    </button>
                </div>
                <div class="register-other">
                    <router-link
                        :to="{name:'login'}">
                        <p class="login-other-f">Log in</p>
                    </router-link>
                </div>
                <div class="login-with">
                    <div class="login-with-img">
                        <img src="../assets/google.png" alt="Google">
                    </div>
                    <div class="login-with-img">
                        <img src="../assets/facebook.png" alt="Facebook">
                    </div>
                    <div class="login-with-img">
                        <img src="../assets/ds.png" alt="Discord">
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
export default {
  name: 'RegisterC',
  data(){
        return{
            Email:"",
            Sex:"Male",
            Username:"",
            Country:"Ukraine",
            Password:"",
            passwordCheck:"",
            FirstName: "jenya",
            LastName: "tkach",
            passwordTypeCheck:false
        }
  },
  methods: {
    async register() {
      if (this.Password != this.passwordCheck) {
        alert("Passwords do not match")
        return
      }
      try {
        const response = await fetch('http://localhost:3000/auth/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(
            { 
                username: this.Username, 
                password: this.Password, 
                email: this.Email,
                country: this.Country,
                firstName: this.FirstName,
                lastName: this.LastName,
                sex: this.Sex
            }
        )
        });
        let res = await response.json();
        if(res){
          this.$router.push('/login');
        }
      } catch (error) {
        console.error('Error:', error);
      }
    }
  }
}
</script>